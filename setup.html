// ðŸ†• ENHANCED: Setup form submission with dashboard link generation document.getElementById('chatbotForm').addEventListener('submit', async function(e) { e.preventDefault(); // Collect all form data const selectedTimes = Array.from(document.querySelectorAll('.time-slot input:checked')).map(cb => cb.value); const selectedActivities = Array.from(document.querySelectorAll('.activity-option input:checked')).map(cb => cb.value); const selectedColor = document.querySelector('input[name="brandColor"]:checked').value; const selectedAlertPreference = document.querySelector('input[name="alertPreference"]:checked').value; const config = { // Basic Information businessName: document.getElementById('businessName').value, businessType: document.getElementById('businessType').value, location: document.getElementById('location').value, // Business Details websiteUrl: document.getElementById('websiteUrl').value, phoneNumber: document.getElementById('phoneNumber').value, businessHours: document.getElementById('businessHours').value, peakSeason: document.getElementById('peakSeason').value, maxGroupSize: document.getElementById('maxGroupSize').value, companyTagline: document.getElementById('companyTagline').value, // Activity Customization activityTypes: selectedActivities, difficultyLevel: document.getElementById('difficultyLevel').value, minAge: document.getElementById('minAge').value, maxAge: document.getElementById('maxAge').value, durationOptions: document.getElementById('durationOptions').value, seasonalAvailability: document.getElementById('seasonalAvailability').value, // Schedule & Pricing times: selectedTimes, duration: document.getElementById('duration').value, adultPrice: document.getElementById('adultPrice').value, childPrice: document.getElementById('childPrice').value, groupDiscount: document.getElementById('groupDiscount').value, specialOffers: document.getElementById('specialOffers').value, // Policies whatToBring: document.getElementById('whatToBring').value, cancellationPolicy: document.getElementById('cancellationPolicy').value, weatherPolicy: document.getElementById('weatherPolicy').value, // Chatbot Personality chatbotTone: document.getElementById('chatbotTone').value, languageStyle: document.getElementById('languageStyle').value, expertiseLevel: document.getElementById('expertiseLevel').value, responseLength: document.getElementById('responseLength').value, customGreeting: document.getElementById('customGreeting').value, // Advanced Features bookingLink: document.getElementById('bookingLink').value, socialMedia: document.getElementById('socialMedia').value, certifications: document.getElementById('certifications').value, // Contact Preferences alertPreference: selectedAlertPreference, // ðŸ†• NEW responseTime: document.getElementById('responseTime').value, contactMethods: document.getElementById('contactMethods').value, operatingHours: document.getElementById('operatingHours').value, handoffTriggers: document.getElementById('handoffTriggers').value, // Branding brandColor: selectedColor, // Waiver waiverLink: document.getElementById('waiverLink').value }; console.log('Submitting enhanced config:', config); try { const response = await fetch('/api/save-config', { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify(config) }); const result = await response.json(); console.log('Server response:', result); if (result.success && result.embedCode) { // ðŸ†• ENHANCED: Show different success messages based on alert preference document.getElementById('embedCode').textContent = result.embedCode; // Create enhanced success section with conditional dashboard link const successSection = document.getElementById('embedSection'); let successHTML = `
ðŸŽ‰ Your Enhanced Chatbot is Ready!
âœ… Operator ID: ${result.operatorId}
`; if (selectedAlertPreference === 'dashboard') { successHTML += `
ðŸ“Š Your Dashboard Link:
${result.baseUrl}/dashboard

ðŸ’¡ Bookmark this link! Use it to respond to customers in real-time.
`; } else if (selectedAlertPreference === 'email') { successHTML += `
ðŸ“§ Email Alerts Enabled

You'll receive email notifications when customers request human support.
`; } else { successHTML += `
ðŸ¤– AI-Only Mode

Your chatbot will handle all requests automatically without human alerts.
`; } successHTML += `

Copy this code and paste it into your website:
`; successSection.innerHTML = successHTML + `

${result.embedCode}

ðŸš€ Next Steps:

    Copy the embed code above and paste it into your website
    Test your chatbot by visiting your website
    ${selectedAlertPreference === 'dashboard' ? '
    Bookmark your dashboard link for responding to customers
    ' : ''}
    Try asking for an agent to test the handoff system
    Customize further by creating a new chatbot with different settin
